{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Ignition API Function Definition",
  "description": "Schema for Ignition Python API function definitions",
  "type": "object",
  "required": ["module", "version", "functions"],
  "properties": {
    "module": {
      "type": "string",
      "description": "The module name (e.g., 'system.tag', 'system.perspective')",
      "pattern": "^system\\."
    },
    "version": {
      "type": "string",
      "description": "Minimum Ignition version (e.g., '8.0', '8.1', '8.3')"
    },
    "functions": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "signature", "description"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Function name without module prefix"
          },
          "signature": {
            "type": "string",
            "description": "Full function signature with parameters"
          },
          "params": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["name", "type", "description"],
              "properties": {
                "name": {"type": "string"},
                "type": {"type": "string"},
                "description": {"type": "string"},
                "optional": {"type": "boolean", "default": false},
                "default": {"type": "string"}
              }
            }
          },
          "returns": {
            "type": "object",
            "properties": {
              "type": {"type": "string"},
              "description": {"type": "string"}
            }
          },
          "description": {
            "type": "string",
            "description": "Brief function description"
          },
          "long_description": {
            "type": "string",
            "description": "Detailed description with usage notes"
          },
          "scope": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["Gateway", "Vision", "Perspective", "Designer"]
            },
            "description": "Where this function can be called"
          },
          "deprecated": {
            "type": "boolean",
            "default": false
          },
          "since": {
            "type": "string",
            "description": "Version when function was introduced"
          },
          "docs_url": {
            "type": "string",
            "format": "uri",
            "description": "Link to official documentation"
          },
          "examples": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Code examples"
          }
        }
      }
    }
  }
}
